<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Python on muioo blog</title>
        <link>https://muioo.github.io/tags/python/</link>
        <description>Recent content in Python on muioo blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <copyright>muioo</copyright>
        <lastBuildDate>Mon, 26 Jan 2026 00:00:00 +0000</lastBuildDate><atom:link href="https://muioo.github.io/tags/python/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>【Claude Code 规则】FastAPI 后端开发规则</title>
        <link>https://muioo.github.io/p/claude-code-%E8%A7%84%E5%88%99fastapi-%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E8%A7%84%E5%88%99/</link>
        <pubDate>Mon, 26 Jan 2026 00:00:00 +0000</pubDate>
        
        <guid>https://muioo.github.io/p/claude-code-%E8%A7%84%E5%88%99fastapi-%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E8%A7%84%E5%88%99/</guid>
        <description>&lt;h1 id=&#34;后端开发规则fastapi&#34;&gt;后端开发规则（fastapi）
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;您是一位精通 Python、FastAPI 和可扩展 API 开发的专家。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;关键原则&#34;&gt;关键原则
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;编写简洁、技术性的回复，并提供准确的 Python 示例。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;使用函数式、声明式编程；尽可能避免使用类。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;优先使用迭代和模块化，避免代码重复。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;使用带有辅助动词的描述性变量名（例如 &lt;code&gt;is_active&lt;/code&gt;、&lt;code&gt;has_permission&lt;/code&gt;）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;目录和文件使用小写字母和下划线（例如 &lt;code&gt;routers/user_routes.py&lt;/code&gt;）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;优先使用命名导出路由和工具函数。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;使用“接收对象，返回对象”（RORO）模式。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;目录结构采用&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;backend/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;├── api/					&lt;span class=&#34;c1&#34;&gt;# API路由层&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;├── __init__.py             &lt;span class=&#34;c1&#34;&gt;# 创建FastAPI应用实例，注册路由&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;└── v1/                     &lt;span class=&#34;c1&#34;&gt;# API版本1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    ├── __init__.py         &lt;span class=&#34;c1&#34;&gt;# 注册v1版本的所有路由&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    └── endpoints/          &lt;span class=&#34;c1&#34;&gt;# 具体的端点模块&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        ├── login/          &lt;span class=&#34;c1&#34;&gt;# 登录相关接口&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        ├── user/           &lt;span class=&#34;c1&#34;&gt;# 用户管理接口&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        ├── role/           &lt;span class=&#34;c1&#34;&gt;# 角色管理接口&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        └── permission/     &lt;span class=&#34;c1&#34;&gt;# 权限管理接口                  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;├── controllers/            &lt;span class=&#34;c1&#34;&gt;# 业务逻辑控制器层&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;├── core/					&lt;span class=&#34;c1&#34;&gt;# 核心功能模块&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	├── security.py         &lt;span class=&#34;c1&#34;&gt;# JWT认证、用户身份验证、OAuth2配置&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	├── crud.py  			&lt;span class=&#34;c1&#34;&gt;# 通用CRUD操作基类&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	├── dependencies.py     &lt;span class=&#34;c1&#34;&gt;# FastAPI依赖注入函数						&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;├── models/                 &lt;span class=&#34;c1&#34;&gt;# 数据库模型层&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;├── schemas/                &lt;span class=&#34;c1&#34;&gt;# 数据验证和序列化层&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;├── settings/				&lt;span class=&#34;c1&#34;&gt;# 配置管理，数据库连接配置，JWT密钥和算法配置，应用程序环境变量，第三方服务配置等&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;├── utils/                  &lt;span class=&#34;c1&#34;&gt;# 工具函数库，密码加密和验证，JWT令牌生成和解析，数据序列化工具，其他通用工具函数&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;├── main.py                 &lt;span class=&#34;c1&#34;&gt;# 应用入口文件&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;└── __init__.py             &lt;span class=&#34;c1&#34;&gt;# 包初始化文件&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;pythonfastapi&#34;&gt;Python/FastAPI
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;使用 &lt;code&gt;def&lt;/code&gt; 定义纯函数，使用 &lt;code&gt;async def&lt;/code&gt; 定义异步操作。&lt;/li&gt;
&lt;li&gt;为所有函数签名使用类型提示。优先使用 Pydantic 模型而不是原始字典进行输入验证。&lt;/li&gt;
&lt;li&gt;文件结构：导出的路由器、子路由、工具函数、静态内容、类型（模型、模式）。&lt;/li&gt;
&lt;li&gt;避免在条件语句中使用不必要的大括号。&lt;/li&gt;
&lt;li&gt;对于条件语句中的单行语句，省略大括号。&lt;/li&gt;
&lt;li&gt;对于简单的条件语句，使用简洁的单行语法（例如 &lt;code&gt;if condition: do_something()&lt;/code&gt;）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;错误处理和验证&#34;&gt;错误处理和验证
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;优先处理错误和边缘情况：
&lt;ul&gt;
&lt;li&gt;在函数开头处理错误和边缘情况。&lt;/li&gt;
&lt;li&gt;使用提前返回来处理错误条件，避免深度嵌套的 &lt;code&gt;if&lt;/code&gt; 语句。&lt;/li&gt;
&lt;li&gt;将正常路径放在函数末尾，以提高可读性。&lt;/li&gt;
&lt;li&gt;避免不必要的 &lt;code&gt;else&lt;/code&gt; 语句；使用 &lt;code&gt;if-return&lt;/code&gt; 模式。&lt;/li&gt;
&lt;li&gt;使用守卫子句提前处理前提条件和无效状态。&lt;/li&gt;
&lt;li&gt;实现适当的错误日志记录和用户友好的错误消息。&lt;/li&gt;
&lt;li&gt;使用自定义错误类型或错误工厂进行一致的错误处理。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;依赖项&#34;&gt;依赖项
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;FastAPI&lt;/li&gt;
&lt;li&gt;Pydantic v2&lt;/li&gt;
&lt;li&gt;异步数据库库，如 &lt;code&gt;asyncpg&lt;/code&gt; 或 &lt;code&gt;aiomysql&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;SQLAlchemy 2.0（如果使用 ORM 功能）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;fastapi-特定指南&#34;&gt;FastAPI 特定指南
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;使用函数式组件（普通函数）和 Pydantic 模型进行输入验证和响应模式。&lt;/li&gt;
&lt;li&gt;使用声明式路由定义，并带有清晰的返回类型注解。&lt;/li&gt;
&lt;li&gt;使用 &lt;code&gt;def&lt;/code&gt; 定义同步操作，使用 &lt;code&gt;async def&lt;/code&gt; 定义异步操作。&lt;/li&gt;
&lt;li&gt;尽量减少 &lt;code&gt;@app.on_event(&amp;quot;startup&amp;quot;)&lt;/code&gt; 和 &lt;code&gt;@app.on_event(&amp;quot;shutdown&amp;quot;)&lt;/code&gt; 的使用；优先使用生命周期上下文管理器来管理启动和关闭事件。&lt;/li&gt;
&lt;li&gt;使用中间件进行日志记录、错误监控和性能优化。&lt;/li&gt;
&lt;li&gt;使用异步函数优化 I/O 密集型任务的性能，使用缓存策略和延迟加载。&lt;/li&gt;
&lt;li&gt;使用 &lt;code&gt;HTTPException&lt;/code&gt; 处理预期错误，并将其建模为特定的 HTTP 响应。&lt;/li&gt;
&lt;li&gt;使用中间件处理意外错误、日志记录和错误监控。&lt;/li&gt;
&lt;li&gt;使用 Pydantic 的 &lt;code&gt;BaseModel&lt;/code&gt; 进行一致的输入/输出验证和响应模式。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;性能优化&#34;&gt;性能优化
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;尽量减少阻塞 I/O 操作；对所有数据库调用和外部 API 请求使用异步操作。&lt;/li&gt;
&lt;li&gt;使用 Redis 或内存存储等工具为静态和频繁访问的数据实现缓存。&lt;/li&gt;
&lt;li&gt;使用 Pydantic 优化数据序列化和反序列化。&lt;/li&gt;
&lt;li&gt;对大数据集和大量 API 响应使用延迟加载技术。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;关键约定&#34;&gt;关键约定
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;依赖 FastAPI 的依赖注入系统来管理状态和共享资源。&lt;/li&gt;
&lt;li&gt;优先考虑 API 性能指标（响应时间、延迟、吞吐量）。&lt;/li&gt;
&lt;li&gt;限制路由中的阻塞操作：
&lt;ul&gt;
&lt;li&gt;优先使用异步和非阻塞流程。&lt;/li&gt;
&lt;li&gt;使用专用的异步函数进行数据库和外部 API 操作。&lt;/li&gt;
&lt;li&gt;清晰构建路由和依赖关系，以优化可读性和可维护性。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;有关最佳实践，请参考 FastAPI 文档中的“数据模型”、“路径操作”和“中间件”部分。&lt;/p&gt;
&lt;h3 id=&#34;数据库&#34;&gt;数据库
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;数据库使用mysql，数据库相关配置在settings目录的config.py文件进行操作。&lt;/li&gt;
&lt;li&gt;使用tortoseorm进行数据库操作&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>【Python 正则】Python 正则表达式笔记</title>
        <link>https://muioo.github.io/p/python-%E6%AD%A3%E5%88%99python-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Sat, 24 Jan 2026 00:00:00 +0000</pubDate>
        
        <guid>https://muioo.github.io/p/python-%E6%AD%A3%E5%88%99python-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;h2 id=&#34;python-正则表达式&#34;&gt;Python 正则表达式
&lt;/h2&gt;&lt;p&gt;（请在此处添加文章内容）&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
